<link rel="stylesheet" href="/rubintv/static/stylesheets/main_style.css"></link>

<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type=text/javascript src="/rubintv/static/js/refresh.js"></script>
  
    <title>Rubin TV Home Page</title>
</head>

<body>
	<header>
	  <div id="logo"><img src="/rubintv/static/images/Rubin_Logo.png" style="width:180px;height:120px;"></div>
	  <div id="title"><center><h1><br><br>Rubin TV image display service&nbsp;&nbsp;&nbsp;&nbsp;</h1></center></div>
	  <div id="logo"><img src="/rubintv/static/images/tv4.png" style="width:180px;height:120px;"></div>
	</header>
	<section>
		<strong>This site is for accessing rapid image analysis from the LSST Auxiliary Telescope.</strong>
	</section>
	<section id="pageContent">
		<main role="main">
			<article>
				<h2>Most recent image</h2>
				<p>The most recent image analysis is rapidly uploaded to the site selected to the right.  It will refresh as soon as a new image is available.  The most recent images are listed in the table at the bottom of the page.  There are three types of image analysis, simple non-dispersed images, spectral analysis of dispersed images, and analysis of mount tracking accuracy.</p>
			</article>
			<article>
				<h2>Past images</h2>
				<p>Past images are available by selecting a date and sequence number from the fields on the right.  </p>
			</article>
			<article>
				<h2>Searching for past images between dates</h2>
				<p>You can search for past images within a time window using the fields on the lower right. The Begin Date and End Date are not inclusive.  Only dates between the two are returned.  The list of available images between the two dates will appear in the table at the bottom of the page. The "Number in Table" entry determines how many entries are displayed in the table.</p>

			</article>
			<article>
				<h2>More to come!</h2>
				<p></p>
			</article>


<h1>Table of recent images</h1>

<div id="refresher">

<table class="crimson">

  <thead>

    <tr>
      <th> Date </th>
      <th> Sequence Number </th>
      <th colspan={{ncols}}> Channels </th>
    </tr>

  </thead>

  <tbody>

    {% for img in imgs %}
    <tr>
      <td>{{img.cleanDate()}}</td>
      <td>{{img.seq}}</td>
      {% for chan in img.chans %}
        {% if chan is not none %}
          <td><a href="{{ '/rubintv/' + chan.endpoint + '/' + img.cleanDate() + '/' + img.seq|string }}">{{chan.name}}</a></td>
        {% else %}
          <td></td>
          <td></td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>

</table>

</div>


</main>
<aside>
		  
		  <div><h2>Most recent images</h2>
		    <button type="button" onclick="window.open('http://localhost:8000/rubintv/im_current','_blank');"><img src="/rubintv/static/images/tv1.jpeg" style="width:60px;height:45px;"><br/>Image</button>
		    <button type="button" onclick="window.open('http://localhost:8000/rubintv/spec_current','_blank');"><img src="/rubintv/static/images/tv3.jpeg" style="width:60px;height:45px;"><br/>Spectrum</button>
		    <button type="button" onclick="window.open('http://localhost:8000/rubintv/mount_current','_blank');"><img src="/rubintv/static/images/tv2.jpeg" style="width:60px;height:45px;"><br/>Mount</button>
</div>

<div><h2>Past image event</h2>
<form style="background-color:light blue; "onSubmit="return im_process();" id="imevents">
  <label for="date">Date: Format=2021-06-08:</label><br>
  <input type="text" style="text-align:center;" id="im_date" name="date" value="2021-06-08"><br>
  <label for="seqno">Sequence number:</label><br>
  <input type="text" style="text-align:center;" id="im_seqno" name="seqno" value="179"><br><br>
  <input type="submit" value="Submit">

  <script>
    function im_process()
    {
    window.open( 
    "/rubintv/imevents/" + document.getElementById("im_date").value + "/" + document.getElementById("im_seqno").value, "_blank");
    return false;
    }
</script>
</form>
</div>

<div><h2>Past spectrum event</h2>
<form style="background-color:light blue; "onSubmit="return spec_process();" id="specevents">
  <label for="date">Date: Format=2021-06-08:</label><br>
  <input type="text" style="text-align:center;" id="spec_date" name="date" value="2021-06-08"><br>
  <label for="seqno">Sequence number:</label><br>
  <input type="text" style="text-align:center;" id="spec_seqno" name="seqno" value="350"><br><br>
  <input type="submit" value="Submit">

  <script>
    function spec_process()
    {
    window.open( 
    "/rubintv/specevents/" + document.getElementById("spec_date").value + "/" + document.getElementById("spec_seqno").value, "_blank");
    return false;
    }
</script>
</form>
</div>

<div><h2>Past mount tracking event</h2>
<form style="background-color:light blue; "onSubmit="return mount_process();" id="imevents">
  <label for="date">Date: Format=2021-06-08:</label><br>
  <input type="text" style="text-align:center;" id="mount_date" name="date" value="2021-06-08"><br>
  <label for="seqno">Sequence number:</label><br>
  <input type="text" style="text-align:center;" id="mount_seqno" name="seqno" value="208"><br><br>
  <input type="submit" value="Submit">

  <script>
    function mount_process()
    {
    window.open( 
    "/rubintv/mountevents/" + document.getElementById("mount_date").value + "/" + document.getElementById("mount_seqno").value, "_blank");
    return false;
    }
</script>
</form>
</div>

<div><h2>Search date range</h2>
<form style="background-color:light blue;" onSubmit="return search_process();" id="searchevents">
  <label for="date">Begin Date: Format=2021-06-08:</label><br>
  <input type="text" style="text-align:center;" id="beg_date" name="beg_date" value="2021-06-08"><br>
  <label for="date">End Date: Format=2021-06-08:</label><br>
  <input type="text" style="text-align:center;" id="end_date" name="end_date" value="2021-06-10"><br><br>
  <label for="num">Number in Table:</label><br>
  <input type="text" style="text-align:center;" id="num" name="num" value="500"><br><br>
  <input type="submit" value="Submit">

  <script>
    function search_process()
    {
    window.open( 
    "/rubintv/?beg_date=" + document.getElementById("beg_date").value + "&end_date=" + document.getElementById("end_date").value +"&num=" + document.getElementById("num").value, "_self");
    return false;
    }
</script>

</form>
</div>
</aside>
</section>

</body>

</html>
